<!DOCTYPE html>
<html>
  <head>
    <link href="css/styles.css" media="screen" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <h1>here is adi's sweet ass guide to drones</h1>
    
    <div id="content-drone"></div>
    
    <script id="drone-template" type="text/x-handlebars-template">
      <div class="entry">
        <div class="img" style="background-image:url('{{photo}}');"></div>
        <h2>{{name}}</h2>
        <h3><strong>Launch year:</strong> {{launchyear}}</h3>
         <h3><strong>Size:</strong> {{size}}</h3>
         <h3><strong>Primary use:</strong> {{primaryuse}}</h3>
         <a class="more">More information &rarr;</a>

         <div class="drone_modal" style="display:none;">
           <div>
             <div class="photo" style="background-image:url('{{photo}}');">
                <h2>{{name}}</h2>
             </div>
             <h3><strong>Launch year:</strong> {{launchyear}}</h3>
             <h3><strong>Company:</strong> {{company}}</h3>
              <h3><strong>Size:</strong> {{size}}</h3>
              <h3><strong>Weight:</strong> {{weight}}</h3>
              <h3><strong>Altitude:</strong> {{altitude}}</h3>
              <h3><strong>Primary use:</strong> {{primaryuse}}</h3>
              <p>{{{toknow}}}</p>
          </div>
         </div> 

      </div>

     
    </script>

    <!-- Don't need jQuery for Tabletop, but using it for this example -->
    <script type="text/javascript" src="handlebars.js"></script>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="tabletop.js"></script>
    <script type="text/javascript">
      var public_spreadsheet_url = 'https://docs.google.com/spreadsheet/pub?key=0Audl93NY80BvdE5ocXNaZDlXaDNZNFFjc2VaTlU0X2c&output=html';

      $(document).ready( function() {
        Tabletop.init( { key: public_spreadsheet_url,
                         callback: showInfo,
                         parseNumbers: true } );

      });
        
      function showInfo(data, tabletop) {
        var source   = $("#drone-template").html();
        var template = Handlebars.compile(source);

        $.each( tabletop.sheets("drones").all(), function(i, drone) {
          var html = template(drone);
          $("#content-drone").append(html);
        });


        $( ".more" ).click(function() {
          $( this ).parent().find(".drone_modal").slideToggle();
        });
        $( ".drone_modal" ).click(function() {
          $(this).hide();
        });
      }
    
    </script>

  </body>
</html>
